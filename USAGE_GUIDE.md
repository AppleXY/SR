# 🚀 NIPS 2024 论文批量解析工具 v2.0

## ✨ 新系统特性

✅ **断点续传** - 支持中断后继续处理  
✅ **进度检测** - 自动识别已处理论文  
✅ **错误恢复** - 失败后可重启继续  
✅ **美观进度条** - 实时显示处理进度  
✅ **详细日志** - 完整的处理记录  
✅ **优雅退出** - 支持 Ctrl+C 安全停止  
✅ **统计信息** - 详细的成功/失败统计  

## 📋 快速开始

### 1. 运行批量处理

```bash
./run.sh start
```

这会：
- 自动检查依赖
- 显示进度条
- 处理所有268篇论文
- 支持 Ctrl+C 安全停止

### 2. 查看进度

```bash
./run.sh status
```

显示：
- 已处理论文数量
- 成功/失败统计
- 检查点信息

### 3. 查看实时日志

```bash
./run.sh logs
```

实时显示处理日志，按 Ctrl+C 退出

### 4. 清理重新开始

```bash
./run.sh clean
```

⚠️ 谨慎使用，会删除所有结果文件

## 🎯 运行效果预览

### 启动界面
```
🚀 NIPS 2024 论文批量解析工具 v2.0
📄 找到 268 个论文ID
总计: 268 篇论文
已完成: 0 篇
待处理: 268 篇
结果保存到: nips2024_papers.jsonl
```

### 进度条显示
```
批量处理: 67%|██████▋   | 180/268 [2:15:30<1:05:20, 44.55s/it] 成功=165, 失败=15, 跳过=0
```

### 完成统计
```
📊 处理完成统计
====================================
总计论文: 268
成功处理: 245
处理失败: 23
跳过已完成: 0
实际处理: 268
处理耗时: 3:42:15
平均耗时: 54.2秒/篇

📁 结果文件: nips2024_papers.jsonl
📁 日志文件: processing.log
📁 检查点文件: checkpoint.json
```

## 📁 文件说明

| 文件名 | 说明 |
|--------|------|
| `nips2024_papers.jsonl` | 主输出文件，包含所有解析结果 |
| `processing.log` | 详细日志文件 |
| `checkpoint.json` | 检查点文件，用于断点续传 |
| `run.sh` | 主运行脚本 |
| `robust_batch_processor.py` | 核心处理程序 |

## 📊 输出格式

每行JSONL记录包含：

```json
{
  "paper_id": "01I55gys19",
  "pdf_url": "https://openreview.net/pdf?id=01I55gys19", 
  "markdown_content": "# 论文标题\n\n## 摘要\n...",
  "status": "success",
  "markdown_file": "full.md",
  "content_length": 48251,
  "processed_at": "2025-08-25T01:45:30.052691"
}
```

失败记录格式：
```json
{
  "paper_id": "xxxxx",
  "status": "error",
  "error": "错误描述",
  "task_id": "xxx",
  "processed_at": "2025-08-25T01:45:30.052691"
}
```

## 🔧 高级功能

### 断点续传
- 系统会自动保存进度
- 重新启动时跳过已处理论文
- 支持多次中断和重启

### 错误处理
- 自动重试失败任务
- 详细错误分类统计
- 不会因单个失败停止整体处理

### 信号处理
- 支持 Ctrl+C 优雅退出
- 自动保存当前进度
- 确保数据不丢失

## ⚡ 性能参数

- **并发处理**: 1个论文/时间（避免API限制）
- **超时设置**: 30分钟/论文
- **状态检查**: 每15秒检查一次
- **检查点保存**: 每10篇论文保存一次
- **预计总时间**: 3-4小时（268篇）

## 🛠️ 故障排除

### 网络问题
- 系统会自动重试
- 检查网络连接
- 确保API服务可用

### API限制
- 系统已限制并发数
- 如遇限制可等待后重启

### 磁盘空间
- 每篇论文约50-100KB
- 总计约15-30MB存储需求

### 中断恢复
1. 重新运行 `./run.sh start`
2. 系统自动检测已完成论文
3. 从中断点继续处理

## 🎉 开始使用

现在就开始批量处理：

```bash
./run.sh start
```

预计3-4小时后获得完整的268篇NIPS 2024论文Markdown解析结果！

---

**提示**: 运行过程中可以安全地按 Ctrl+C 停止，下次运行会从停止点继续。